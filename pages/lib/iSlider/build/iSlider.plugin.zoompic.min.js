!function(t,e){"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?e(t,require("./iSlider")):"function"==typeof define&&define.amd?define(["./iSlider"],function(a){e(t,a)}):e(t,t.iSlider)}(window?window:this,function(t,e){"use strict";function a(t,e,a,r){return"translate"+(z?"3d(":"(")+t+"px,"+e+(z?"px,"+a+"px)":"px)")+"scale("+r+")"}function r(t,e){var a,r;return a=t.left-e.left,r=t.top-e.top,Math.sqrt(a*a+r*r)}function n(t,e){return t+"px "+e+"px"}function s(t){return Array.prototype.slice.call(t).map(function(t){return{left:t.pageX,top:t.pageY}})}function o(t,e){var a=r(t[0],t[1]),n=r(e[0],e[1]);return n/a}function i(e){var a={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,offsetX:0,offsetY:0},r=0,n=0;if(!t.getComputedStyle||!e)return a;var s,o,i=t.getComputedStyle(e);s=i.webkitTransform||i.mozTransform,o=i.webkitTransformOrigin||i.mozTransformOrigin;var l=o.match(/(.*)px\s+(.*)px/);if(l.length>1&&(r=l[1]-0,n=l[2]-0),"none"===s)return a;var f,c=s.match(/^matrix3d\((.+)\)$/),p=s.match(/^matrix\((.+)\)$/);return c?(f=c[1].split(", "),a={translateX:f[12]-0,translateY:f[13]-0,translateZ:f[14]-0,offsetX:r-0,offsetY:n-0,scaleX:f[0]-0,scaleY:f[5]-0,scaleZ:f[10]-0}):p&&(f=p[1].split(", "),a={translateX:f[4]-0,translateY:f[5]-0,offsetX:r-0,offsetY:n-0,scaleX:f[0]-0,scaleY:f[3]-0}),a}function l(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function f(t){T=1,x=t&&t.zoomFactor||2}function c(t){D.call(this,t);var e=this.els[1].querySelector("img:first-child"),a=this.deviceEvents;if(a.hasTouch&&null!==e){E=!0;var r=i(e);b=s(t.targetTouches),w=r.translateX-0,k=r.translateY-0,T=r.scaleX,Y=e;var o=v(e);if(2==t.targetTouches.length){H=null;var f=t.touches,c=l({x:f[0].pageX,y:f[0].pageY},{x:f[1].pageX,y:f[1].pageY});e.style.webkitTransformOrigin=n(c.x-o.left,c.y-o.top)}else if(1===t.targetTouches.length){var p=(new Date).getTime();S=0,300>p-H&&(t.preventDefault(),S=3),H=p}}}function p(t){if(E){var e=0,a=Y,r=this.deviceEvents;if(r.hasTouch&&(2===t.targetTouches.length?(a.style.webkitTransitionDuration="0",t.preventDefault(),h(t),e=2):1===t.targetTouches.length&&T>1&&(a.style.webkitTransitionDuration="0",t.preventDefault(),g.call(this,t),e=1),S=e,e>0))return}q.call(this,t)}function u(t){var e=e||2,r=Y,s=v(r);T=1==T?e:1,r.style.webkitTransform=a(0,0,0,T),1!=T&&(r.style.webkitTransformOrigin=n(t.touches[0].pageX-s.left,t.touches[0].pageY-s.top))}function h(t){var e=s(t.targetTouches),r=o(b,e),n=Y;r=C>T*r?C:T*r,n.style.webkitTransform=a(0,0,0,r)}function d(t){if(E){var e=0;if(2===S?(y(t),e=2):1==S?(y(t),e=1):3===S&&(u(t),y(t),E=!1),e>0)return}W.call(this,t)}function g(t){var e=Y,r=this.deviceEvents,n={X:r.hasTouch?t.targetTouches[0].pageX-this.startX:t.pageX-this.startX,Y:r.hasTouch?t.targetTouches[0].pageY-this.startY:t.pageY-this.startY},s={x:w+n.X-0,y:k+n.Y-0};e.style.webkitTransform=a(s.x,s.y,0,T)}function v(t){var e={left:0,top:0};do e.top+=t.offsetTop||0,e.left+=t.offsetLeft||0,t=t.offsetParent;while(t);return e}function m(t,e,a){var r,n,s=v(t);O={start:{left:s.left,top:s.top},end:{left:s.left+t.clientWidth,top:s.top+t.clientHeight}};var o=1==a?"left":"top";return r=O.start[o],n=O.end[o],e>=r&&n>=e}function X(t,e){var a=0,r=m(t,e.start.left,1),n=m(t,e.end.left,1),s=m(t,e.start.top,0),o=m(t,e.end.top,0);return r!=n&&s!=o?a=r&&o?1:r&&s?2:n&&o?3:4:r==n?!s&&o?a=5:!o&&s&&(a=6):s==o?!r&&n?a=7:r&&!n&&(a=8):s==o==r==n&&(a=9),a}function y(){if(1!=T){var t,e,r,n,s,o,l,f,c,p,u=Y;switch(r=i(u),c=u.parentNode,n=u.clientWidth*r.scaleX,s=u.clientHeight*r.scaleX,o=v(u),l={left:(1-r.scaleX)*r.offsetX+o.left+r.translateX,top:(1-r.scaleX)*r.offsetY+o.top+r.translateY},f={left:l.left+n,top:l.top+s},t=l.left,e=l.top,p=X(c,{start:l,end:f})){case 1:t=O.start.left,e=O.end.top-s;break;case 2:t=O.start.left,e=O.start.top;break;case 3:t=O.end.left-n,e=O.end.top-s;break;case 4:t=O.end.left-n,e=O.start.top;break;case 5:e=O.end.top-s;break;case 6:e=O.start.top;break;case 7:t=O.end.left-n;break;case 8:t=O.start.left}n<c.clientWidth&&(t=o.left-(r.scaleX-1)*u.clientWidth/2),s<c.clientHeight&&(e=o.top-(r.scaleX-1)*u.clientHeight/2),u.style.webkitTransitionDuration="100ms",u.style.webkitTransform=a(r.translateX+t-l.left,r.translateY+e-l.top,0,r.scaleX)}}var T,x,Y,b,w,k,H,S,D=e.prototype.startHandler,W=e.prototype.endHandler,q=e.prototype.moveHandler,z="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,C=.5,O={},E=!1;e.extend({startHandler:c,moveHandler:p,endHandler:d}),e.regPlugin("zoompic",f)});